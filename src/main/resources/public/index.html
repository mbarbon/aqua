<html>
  <head>
    <!-- Google Analytics -->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-103130411-1', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- End Google Analytics -->
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/rateYo/2.2.0/jquery.rateyo.min.css">
    <link rel="stylesheet" href="/css/aqua.css?r=1">
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/rateYo/2.2.0/jquery.rateyo.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/knockout/3.4.1/knockout-min.js"></script>
    <script src="/js/aqua.js?r=1"></script>
    <link rel="shortcut icon" href="favicon.ico?uniq=1" />
    <title>Aqua: anime recommendations</title>
  </head>
  <body>
    <div class="start-page ko-hidden" id="start-page" data-bind="visible: !hasSource(), css: { 'ko-hidden': false }">
      <div class="start-page-body">
        <img src="aqua-thumbsup.jpg">
        <div class="start-page-head">
          <div class="first-head">Aqua</div>
          <div class="second-head">anime recommendations</div>
        </div>
        <br style="clear: both;" />
      </div>
      <div class="start-your-list">
        MAL user <input data-bind="value: malUserName, enterKey: loadMalList, valueUpdate: 'afterkeydown'"> or
        <a href="#" data-bind="click: useManualList">just add anime you like</a>
      </div>
      <div class="start-your-list" data-bind="if: malLoadQueuePosition">
        Loading MAL anime list (position in queue <!-- ko text: malLoadQueuePosition --><!-- /ko -->)
      </div>
    </div>
    <div class="main-page-head aqua-body ko-hidden" id="main-page-head" data-bind="visible: hasSource, css: { 'ko-hidden': false }">
      <div class="recommendation-source">
        <!-- ko if: isManualList -->
        <div class="aqua-button inline-aqua-button">
          <a href="#" data-bind="click: resetUserData">Use a MAL account</a><br>
        </div>
        <!-- /ko -->
        <!-- ko if: isMalList -->
        <b><!-- ko text: malUserName --><!-- /ko --></b>
        <!-- ko if: malLoadQueuePosition -->
        (position in queue <!-- ko text: malLoadQueuePosition --><!-- /ko -->)
        <!-- /ko -->
        <!-- ko if: malCanRefresh -->
        <div class="aqua-button inline-aqua-button small-aqua-button">
          <a href="#" data-bind="click: loadMalList">Refresh</a>
        </div>
        <!-- /ko -->
        <div class="aqua-button inline-aqua-button small-aqua-button">
          <a href="#" data-bind="click: resetUserData">Change user</a>
        </div>
        <!-- /ko -->
      </div>
      <div class="main-page-logo">
        <img src="aqua-thumbsup.jpg">
        <div class="start-page-head-text"5>
          <div class="first-head">Aqua</div>
          <div class="second-head">anime recommendations</div>
        </div>
      </div>
    </div>
    <div class="recommendation-source aqua-body ko-hidden" id="recommendation-source", data-bind="visible: isManualList, css: { 'ko-hidden': false }">
      Add watched anime <input id="searchAnime" type="text" data-bind="textInput: search.searchString">
    </div>
    <div id="search-results" class="aqua-body ko-hidden" data-bind="visible: searchResults().length, css: { 'ko-hidden': false }">
      <h3 class="search-title">Search results</h3>
      <div class="search-result-list" id="search-results"
           data-bind="template: { name: 'recommendation-item', foreach: searchResults }"></div>
    </div>
    <div class="recommendation-filter ko-hidden" id="recommendation-filter" data-bind="if: hasRecommendations(), css: { 'ko-hidden': false }">
      <!-- ko if: isMalList() -->
      <!-- ko foreach: showHideTags -->
      <div class="aqua-button">
        <a href="#" data-bind="click: toggleTag, text: statusDescription()"></a>
      </div>
      <!-- /ko -->
      <!-- /ko -->
      <!-- ko if: !isMalList() -->
      <!-- ko if: isManualEdit() -->
      <div class="aqua-button"><a href="#" data-bind="click: showRecommendations">See recommendations</a></div>
      <!-- /ko -->
      <!-- ko if: !isManualEdit() -->
      <div class="aqua-button"><a href="#" data-bind="click: editLocalList">Modify your anime list</a></div>
      <!-- /ko -->
      <!-- /ko -->
      <div class="aqua-button">
        <a href="#" data-bind="click: toggleAiring, text: airingStatusDescription()"></a>
      </div>
    </div>
    <div id="local-list-edit" class="aqua-body ko-hidden", data-bind="visible: isManualEdit, css: { 'ko-hidden': false }">
      <h3>My anime list</h3>
      <div class="my-anime-list" id="my-anime-list"
           data-bind="template: { name: 'recommendation-item', foreach: manualAnimeList }"></div>
    </div>
    <div id="recommendations" class="aqua-body ko-hidden", data-bind="visible: !localAnimeListModel.isManualEdit(), css: { 'ko-hidden': false }">
      <h3 class="recommendation-description" data-bind="if: showRecommendedAiringAnime() && recommendedAiringAnime().length">Airing anime</h3>
      <div class="recommendation-list" id="airing"
           data-bind="template: { name: 'recommendation-item', foreach: recommendedAiringAnime, if: showRecommendedAiringAnime }"></div>
      <h3 class="recommendation-description" data-bind="if: recommendedCompletedAnime().length">Completed anime</h3>
      <div class="recommendation-list" id="completed"
           data-bind="template: { name: 'recommendation-item', foreach: recommendedCompletedAnime }"></div>
    </div>
    <script type="text/html" id="recommendation-item">
      <div class="recommendation-item" data-bind="visible: $root.tagVisibility[tags]">
        <a data-bind="attr: { href: malLink(), title: title }" target="_blank">
          <img class="recommendation-image" data-bind="attr: { src: image, alt: title }, text: title">
        </a>
        <div class="recommendation-details">
          <div class="header">
            <a data-bind="attr: { href: malLink(), title: title }, text: title" target="_blank"></a>
          </div>
          <div class="details" data-bind="text: genres, attr: { title: genres }"></div>
          <div class="details">
            <!-- ko text: episodes --><!-- /ko --> eps
            <!-- ko if: franchiseEpisodes -->(<!-- ko text: franchiseEpisodes --><!-- /ko --> in franchise)<!-- /ko -->
          </div>
          <div class="details" data-bind="text: season"></div>
          <div class="details" data-bind="text: $root.tagDescription[tags]"></div>
          <!-- ko if: showStars -->
          Your rating: <div style="display: inline-block; vertical-align: middle" data-bind="animeRating: { rating: $data.userRating, onSet: $root.addManualRating.bind($root) }, if: showStars"></div>
          <!-- ko if: $root.isManualEdit -->
          <input type="button" value="Remove" data-bind="click: $root.removeManualRating.bind($root)">
          <!-- /ko -->
          <!-- /ko -->
        </div>
      </div>
    </div>
  </body>
</html>
